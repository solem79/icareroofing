<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>iCare Admin Panel</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    form { margin-bottom: 40px; border: 1px solid #ccc; padding: 20px; border-radius: 8px; }
    .form-group { margin-bottom: 15px; }
    label { display: block; margin-bottom: 5px; }
    input[type="text"], textarea, input[type="file"] { width: 100%; padding: 8px; }
    button { padding: 10px 15px; cursor: pointer; }
  </style>
</head>
<body>

  <h1>iCare Admin Panel</h1>

  <!-- Slider & Gallery Upload Form -->
  <h2>Upload Images</h2>

  <form id="sliderForm">
    <input type="file" id="imageInput" multiple />
    <select id="uploadType">
      <option value="slider">Slider</option>
      <option value="gallery">Gallery</option>
    </select>
    <div id="previewContainer" style="display:flex; gap:10px; margin-top:10px;"></div>
    <button type="button" id="uploadBtn">Upload Images</button>
  </form>

  <script src="/js/upload.js"></script> 
  <!-- Supabase CDN -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
const supabaseUrl = "https://hcsnwwlukslzoytfnygo.supabase.co";

const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imhjc253d2x1a3Nsem95dGZueWdvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEzMjUxMjEsImV4cCI6MjA4NjkwMTEyMX0.0mhlz6voMx0-xSL6PfhBlUI1fNIC_dbE_GYWSzz7la0";

const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

async function uploadSlider(imageId, titleId, descId) {
  const fileInput = document.getElementById(imageId);

  if (!fileInput.files.length) {
    alert("Select image first");
    return;
  }

  const file = fileInput.files[0];
  const fileName = Date.now() + "-" + file.name;

  const { error } = await supabase.storage
    .from("uploads")
    .upload(fileName, file);

  if (error) {
    console.error(error);
    alert("Upload failed");
    return;
  }

  const imageUrl =
    supabaseUrl + "/storage/v1/object/public/uploads/" + fileName;

  console.log("Uploaded:", imageUrl);
  alert("Upload successful!");
}
</script>
</body>
</html>